!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("phaser")):"function"==typeof define&&define.amd?define("TDLib",["phaser"],e):"object"==typeof exports?exports.TDLib=e(require("phaser")):t.TDLib=e(t.phaser)}(window,function(__WEBPACK_EXTERNAL_MODULE__28__){return function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=26)}([function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function i(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};o(this,t),this.invoker=e,this.name=this.constructor.name,this.actor=n,this.target=r.target,this.config=r,this._queue=[],this.isPaused=!1}return i(t,[{key:"addActions",value:function(t){var e=this;Array.isArray(t)?t.forEach(function(t){e._queue.push(t)}):this._queue.push(t)}},{key:"_abort",value:function(){this._queue.length>0&&this._queue[0]._abort()}},{key:"_start",value:function(){this._queue.length>0&&this._queue[0]._start()}},{key:"finish",value:function(){this._queue.length>0&&this._queue[0].finish()}},{key:"_remove",value:function(){this._queue.length>0&&this._queue.shift(),this._queue.length<=0?this.invoker._remove():this._queue[0]._start()}},{key:"_pause",value:function(){this._queue.length>0&&(this._queue[0]._pause(),this.isPaused=!0)}},{key:"_resume",value:function(){this._queue.length>0&&(this.isPaused=!1,this._queue[0]._resume())}},{key:"_update",value:function(){this._queue.length>0&&this._queue[0]._update()}}],[{key:"BaseAction",get:function(){return function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:r;o(this,t),this.invoker=e,this.startCallback=n,this.finishCallback=r,this.updateCallback=i,this.resumeCallback=a,this.pauseCallback=u,this.isPaused=!1}return i(t,[{key:"_start",value:function(){this.startCallback()}},{key:"finish",value:function(){this.finishCallback(),this.invoker._remove()}},{key:"_abort",value:function(){this.finishCallback()}},{key:"_resume",value:function(){this.isPaused=!1,this.resumeCallback()}},{key:"_pause",value:function(){this.pauseCallback(),this.isPaused=!0}},{key:"_update",value:function(){this.updateCallback()}}]),t}()}}]),t}();e.default=a,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o,r=(o=n(18))&&o.__esModule?o:{default:o};function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function u(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t,e,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var l=function(t){function e(t,n){var o,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=u(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))).contributeFactor=r,o}var n,o,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(e,r.default),n=e,(o=[{key:"play",value:function(t){var n=this;c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"play",this).call(this,function(){n.stopped=!1,t()})}},{key:"stop",value:function(t){var n=this;c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"stop",this).call(this,function(){n.stopped=!0,t()})}}])&&a(n.prototype,o),i&&a(n,i),e}();e.default=l,t.exports=e.default},function(t,e,n){"use strict";var o,r=(o=n(38))&&o.__esModule?o:{default:o};var i={Behaviour:n(8),Examinable:n(39),Interactive:n(40),Observable:n(41),Talkable:n(43),Inventory:n(44)};i=Phaser.Utils.Objects.Extend(!1,i,r.default),t.exports=i},function(t,e){t.exports={GAME:"",TILE_SIZE:48,ROOM_HEIGHT_IN_TILE:6,INVENTORY_WIDTH_IN_TILES_MOBILE:1.25,INVENTORY_WIDTH_IN_TILES_DESKTOP:0,INVENTORY_HEIGHT_IN_TILES_MOBILE:0,INVENTORY_HEIGHT_IN_TILES_DESKTOP:1,ROOM_FRAME_IN_TILES_DESKTOP:.5,ROOM_FRAME_IN_TILES_MOBILE:.25,SCREEN_PROPS:{},DEVICE:"Desktop"}},function(t,e){t.exports={VERSION:"1.0.0",PHASER_VERSION:3.16,LEFT:"_left",RIGHT:"_right"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}
/**
 * @author       Francesco Negri <francesco.negri@outlook.com>
 * @copyright    2019 The Darkest Light
 * @license      {@link https://github.com/FrancescoNegri/TheDarkestLib/blob/master/LICENSE|MIT License}
 */(this,t),this.name=this.constructor.name,this.gameObject=e},t.exports=e.default},function(t,e,n){var o={Action:n(0),Examine:n(30),FaceTo:n(7),Idle:n(33),Interact:n(34),Observe:n(35),RunTo:n(36),WalkTo:n(12)};t.exports=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=a(n(0)),r=a(n(4)),i=a(n(31));function a(t){return t&&t.__esModule?t:{default:t}}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var s=function(t){function e(t,n,a){var u;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(u=c(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))).addActions(new o.default.BaseAction(u,function(){Math.abs(u.actor.x-u.target.x)>i.default.MICRO_MOVEMENT_RADIUS&&(u.actor.facing===r.default.RIGHT?u.actor.x>u.target.x&&(u.actor.facing=r.default.LEFT,u.actor.setFlipX(!0)):u.actor.facing===r.default.LEFT&&u.actor.x<u.target.x&&(u.actor.facing=r.default.RIGHT,u.actor.setFlipX(!1))),u.finish()})),u}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(e,o.default),e}();e.default=s,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o,r=(o=n(0))&&o.__esModule?o:{default:o};function i(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.component=e,this.cursors=this.component.gameObject.room.cursors,this.gameObject=this.component.gameObject,this.room=this.component.gameObject.room,this.add()}var e,n,o;return e=t,(n=[{key:"add",value:function(){null===this.component.pixelPerfect?this.component.gameObject.setInteractive():this.component.gameObject.setInteractive({pixelPerfect:!0,alphaTolerance:this.component.pixelPerfect.alphaTolerance,draggable:!1})}},{key:"getAction",value:function(t){return new r.default.BaseAction(t,function(){console.log("Sono una generica action dei behaviour"),t.finish()})}},{key:"checkLight",value:function(t){return this.room.lightSources.calculateLightsContribuitePoint(this.gameObject)>=t}}])&&i(e.prototype,n),o&&i(e,o),t}();e.default=a,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o,r=(o=n(10))&&o.__esModule?o:{default:o};function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function u(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t,e,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var l=function(t){function e(t,n,o,r,i,a,c,f,s,l,p,y,h,d,b,g,_){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),u(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,o,r,i,a,c,f,s,l,p,y,h,d,b,g,_))}var n,o,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(e,r.default),n=e,(o=[{key:"create",value:function(){c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"create",this).call(this),this.setPipeline("Light2D")}}])&&a(n.prototype,o),i&&a(n,i),e}();e.default=l,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n(2)),r=i(n(16));function i(t){return t&&t.__esModule?t:{default:t}}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function c(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var s=function(t){function e(t,n,i,a){var u,f=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:o.default.INERT,p=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,y=arguments.length>8&&void 0!==arguments[8]?arguments[8]:o.default.DEFAULT_OBSERVE_TEXT,h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:o.default.DEFAULT_EXAMINE_OR_INTERACT_TEXT,d=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,b=arguments.length>11&&void 0!==arguments[11]?arguments[11]:o.default.DEFAULT_NO_LIGHT_OBSERVE_TEXT,g=arguments.length>12&&void 0!==arguments[12]?arguments[12]:o.default.DEFAULT_NO_LIGHT_EXAMINE_OR_INTERACT_TEXT,_=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,m=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,O=arguments.length>15&&void 0!==arguments[15]?arguments[15]:o.default.DEFAULT_MIN_LIGHT_LEVEL_TO_EXAMINE_OR_INTERACT,v=arguments.length>16&&void 0!==arguments[16]?arguments[16]:o.default.DEFAULT_MIN_LIGHT_LEVEL_TO_OBSERVE;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(u=c(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,i,a))).room=t,u.name,u.key=u.constructor.name+(Math.floor(9e3*Math.random())+1e3),u.type=u.constructor.name,u.behaviours=new r.default(u,l,p),u.observeText=y,u.examineOrInteractText=h,u.blockExamineText=d,u.noLightObserveText=b,u.noLightExamineOrInteractText=g,u.examineOrInteractOffsetX=_,u.examineOrInteractThresholdRadius=m,u.minLightLevelToExamineOrInteract=O,u.minLightLevelToObserve=v,u.room.add.existing(u),u.room.updates.add(u),s&&(u.room.physics.add.existing(u),u.setCollideWorldBounds(!0),u.setGravityY(1e4)),null!=f&&(f in u.room.layers?(u.room.layers[f].add(u),u.room.layers.setLayersDepth()):console.warn("ALERT: layer not found for object",u)),u.create(),u}var n,i,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(e,Phaser.Physics.Arcade.Sprite),n=e,(i=[{key:"create",value:function(){console.log("Created:",this.key,"- Type:",this.type,"- Behaviour:",this.behaviours.type)}},{key:"update",value:function(){}},{key:"setName",value:function(t){return this.name=t,this}},{key:"setHitAreaSize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.width,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.height,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.input.hitArea.setSize(t,e),this.input.hitArea.setPosition((this.width-t)/2+n,(this.height-e)/2+o)}}])&&u(n.prototype,i),a&&u(n,a),e}();e.default=s,t.exports=e.default},function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function i(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}
/**
 * @author       Francesco Negri <francesco.negri@outlook.com>
 * @copyright    2019 The Darkest Light
 * @license      {@link https://github.com/FrancescoNegri/TheDarkestLib/blob/master/LICENSE|MIT License}
 */Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=function(t){function e(t,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))).room=t,o}var n,o,u;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(e,Phaser.Plugins.ScenePlugin),n=e,(o=[{key:"boot",value:function(){}}])&&r(n.prototype,o),u&&r(n,u),e}();e.default=u,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=a(n(0)),r=a(n(7)),i=a(n(32));function a(t){return t&&t.__esModule?t:{default:t}}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var s=function(t){function e(t,n,a){var u;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(u=c(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))).addActions([new r.default(u,u.actor,u.config),new o.default.BaseAction(u,function(){Math.abs(u.actor.x-u.target.x)>i.default.MICRO_MOVEMENT_RADIUS?u.actor.x<u.target.x?(u.actor.anims.play("walk"),u.actor.body.setVelocity(i.default.WALK_VELOCITY)):u.actor.x>u.target.x&&(u.actor.anims.play("walk"),u.actor.body.setVelocity(-i.default.WALK_VELOCITY)):u.finish()},function(){u.actor.body.setVelocity(0)},function(){(u.actor.x-u.target.x)*u.actor.body.velocity.x>0&&u.finish()})]),u}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(e,o.default),e}();e.default=s,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=a(n(5)),r=a(n(17)),i=a(n(21));function a(t){return t&&t.__esModule?t:{default:t}}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function f(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var l=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=f(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))).previousEffects=[],n.currentEffect=null,n}var n,a,u;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(e,o.default),n=e,(a=[{key:"play",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,o=arguments[2];this.currentEffect&&this.stop(),t in r.default?this.currentEffect=new r.default[t](this,o):t in r.default.LightEffects?this.gameObject instanceof i.default?this.currentEffect=new r.default.LightEffects[t](this,o):console.log(t+" can only be run by a LightSource"):console.log("No effect with key: ",t),this.currentEffect&&this.currentEffect.play(),n>0?(this.timer=this.gameObject.room.time.addEvent({delay:n,callback:function(){e.stop()},callbackScope:this,repeat:0}),console.log(this.currentEffect.name+"Effect started for",n,"ms")):-1===n?console.log(this.currentEffect.name+"Effect started"):console.log("You must use a positive value!")}},{key:"stop",value:function(){this.currentEffect&&(this.timer&&(this.timer.remove(),this.timer=null),this.previousEffects.push(this.currentEffect),this.currentEffect.stop(),console.log(this.currentEffect.name+"Effect stopped"),this.currentEffect=null,console.log(this.previousEffects))}}])&&c(n.prototype,a),u&&c(n,u),e}();e.default=l,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o,r=(o=n(1))&&o.__esModule?o:{default:o};function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function u(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t,e,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var l=function(t){function e(t,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=u(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,.8))).config.minTime||(o.config.minTime=10),o.config.maxTime||(o.config.maxTime=100),o.config.minPercentageIntensity||(o.config.minPercentageIntensity=.8),o.config.maxPercentageIntensity||(o.config.maxPercentageIntensity=1),o.config.minPercentageRadius||(o.config.minPercentageRadius=.8),o.config.maxPercentageRadius||(o.config.maxPercentageRadius=1),o.config.backToInitialIntensity||(o.config.backToInitialIntensity=!0),o.config.backToInitialRadius||(o.config.backToInitialRadius=!0),o}var n,o,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(e,r.default),n=e,(o=[{key:"play",value:function(){var t=this;c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"play",this).call(this,function(){!function e(){t.gameObject.room.time.addEvent({delay:Math.floor(Math.random()*(t.config.maxTime-t.config.minTime))+t.config.minTime,callback:function(){if(!t.stopped){var n=Math.floor(100*(t.config.minPercentageIntensity+Math.random()*(t.config.maxPercentageIntensity-t.config.minPercentageIntensity))+1)/100;t.gameObject.graphicLight.setIntensity(t.gameObject.config.graphicLight.intensity*n),t.gameObject.diffusedLight.setIntensity(t.gameObject.config.diffusedLight.intensity*n);var o=Math.floor(100*(t.config.minPercentageRadius+Math.random()*(t.config.maxPercentageRadius-t.config.minPercentageRadius))+1)/100;t.gameObject.graphicLight.setRadius(t.gameObject.config.graphicLight.radius*o),e()}},callbackScope:t,repeat:0})}()})}},{key:"stop",value:function(){var t=this;c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"stop",this).call(this,function(){t.config.backToInitialIntensity?(t.gameObject.graphicLight.setIntensity(t.gameObject.config.graphicLight.intensity),t.gameObject.diffusedLight.setIntensity(t.gameObject.config.diffusedLight.intensity)):(t.gameObject.config.graphicLight.intensity=t.gameObject.graphicLight.intensity,t.gameObject.config.diffusedLight.intensity=t.gameObject.diffusedLight.intensity),t.config.backToInitialRadius?t.gameObject.graphicLight.setRadius(t.gameObject.config.graphicLight.radius):t.gameObject.config.graphicLight.radius=t.gameObject.graphicLight.radius})}}])&&a(n.prototype,o),i&&a(n,i),e}();e.default=l,t.exports=e.default},function(t,e,n){
/**
 * @author       Francesco Negri <francesco.negri@outlook.com>
 * @copyright    2019 The Darkest Light
 * @license      {@link https://github.com/FrancescoNegri/TheDarkestLib/blob/master/LICENSE|MIT License}
 */
var o={Component:n(5),ActionComponent:n(29),BehaviourComponent:n(16),EffectComponent:n(13)};t.exports=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n(5)),r=i(n(2));function i(t){return t&&t.__esModule?t:{default:t}}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function c(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var s=function(t){function e(t,n,o){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=c(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))).player,void 0===r.gameObject.room.player?r.player=r.gameObject:r.player=r.gameObject.room.player,r.type=n,r.pixelPerfect=o,r._addBehaviours(),r}var n,i,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(e,o.default),n=e,(i=[{key:"_addBehaviours",value:function(){this.type!==r.default.EXAMINABLE&&this.type!==r.default.INTERACTIVE||(this.observe=new r.default.Observable(this),this.type===r.default.EXAMINABLE?this.examine=new r.default.Examinable(this):this.type===r.default.INTERACTIVE&&(this.interact=new r.default.Interactive(this)))}}])&&u(n.prototype,i),a&&u(n,a),e}();e.default=s,t.exports=e.default},function(t,e,n){var o={Effect:n(18),LightEffects:n(45)};t.exports=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o,r=(o=n(13))&&o.__esModule?o:{default:o};function i(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var a=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.invoker=e,this.config=n,this.gameObject=e.gameObject,this.name=this.constructor.name}var e,n,o;return e=t,(n=[{key:"play",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};this.invoker instanceof r.default?t():console.log("Effects can only be played by the EffectComponent")}},{key:"stop",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};this.invoker instanceof r.default?t():console.log("Effects can only be stopped by the EffectComponent")}}])&&i(e.prototype,n),o&&i(e,o),t}();e.default=a,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o,r=(o=n(1))&&o.__esModule?o:{default:o};function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function u(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t,e,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var l=function(t){function e(t,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=u(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,.5))).config.minTime||(o.config.minTime=10),o.config.maxTime||(o.config.maxTime=400),o.config.finalState||(o.config.finalState="on"),o}var n,o,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(e,r.default),n=e,(o=[{key:"play",value:function(){var t=this;c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"play",this).call(this,function(){!function e(){t.gameObject.room.time.addEvent({delay:Math.floor(Math.random()*(t.config.maxTime-t.config.minTime))+t.config.minTime,callback:function(){t.stopped||(null!==t.gameObject.initialConfig.graphicLight&&(0===t.gameObject.graphicLight.intensity?t.gameObject.graphicLight.setIntensity(t.gameObject.initialConfig.graphicLight.intensity):t.gameObject.graphicLight.setIntensity(0)),null!==t.gameObject.initialConfig.diffusedLight&&(0===t.gameObject.diffusedLight.intensity?t.gameObject.diffusedLight.setIntensity(t.gameObject.initialConfig.diffusedLight.intensity):t.gameObject.diffusedLight.setIntensity(0)),e())},callbackScope:t,repeat:0})}()})}},{key:"stop",value:function(){var t=this;c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"stop",this).call(this,function(){"on"===t.config.finalState?(null!==t.gameObject.initialConfig.graphicLight&&t.gameObject.graphicLight.setIntensity(t.gameObject.initialConfig.graphicLight.intensity),null!==t.gameObject.initialConfig.diffusedLight&&t.gameObject.diffusedLight.setIntensity(t.gameObject.initialConfig.diffusedLight.intensity)):"off"===t.config.finalState&&t.gameObject.turnOff()})}}])&&a(n.prototype,o),i&&a(n,i),e}();e.default=l,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o,r=(o=n(1))&&o.__esModule?o:{default:o};function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function u(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t,e,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var l=function(t){function e(t,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=u(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,.8))).config.minTime||(o.config.minTime=10),o.config.maxTime||(o.config.maxTime=100),o.config.minPercentageIntensity||(o.config.minPercentageIntensity=.8),o.config.maxPercentageIntensity||(o.config.maxPercentageIntensity=1),o.config.backToInitialIntensity||(o.config.backToInitialIntensity=!0),o}var n,o,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(e,r.default),n=e,(o=[{key:"play",value:function(){var t=this;c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"play",this).call(this,function(){!function e(){t.gameObject.room.time.addEvent({delay:Math.floor(Math.random()*(t.config.maxTime-t.config.minTime))+t.config.minTime,callback:function(){if(!t.stopped){var n=Math.floor(100*(t.config.minPercentageIntensity+Math.random()*(t.config.maxPercentageIntensity-t.config.minPercentageIntensity))+1)/100;t.gameObject.graphicLight.setIntensity(t.gameObject.config.graphicLight.intensity*n),t.gameObject.diffusedLight.setIntensity(t.gameObject.config.diffusedLight.intensity*n),e()}},callbackScope:t,repeat:0})}()})}},{key:"stop",value:function(){var t=this;c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"stop",this).call(this,function(){t.config.backToInitialIntensity?(t.gameObject.graphicLight.setIntensity(t.gameObject.config.graphicLight.intensity),t.gameObject.diffusedLight.setIntensity(t.gameObject.config.diffusedLight.intensity)):(t.gameObject.config.graphicLight.intensity=t.gameObject.graphicLight.intensity,t.gameObject.config.diffusedLight.intensity=t.gameObject.diffusedLight.intensity)})}}])&&a(n.prototype,o),i&&a(n,i),e}();e.default=l,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=a(n(9)),r=a(n(2)),i=a(n(13));function a(t){return t&&t.__esModule?t:{default:t}}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function f(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var l=function(t){function e(t,n,o,a,u,c,s,l){var p,y=!(arguments.length>8&&void 0!==arguments[8])||arguments[8];return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(p=f(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,o,a,u,!0,r.default.EXAMINABLE))).setGravityY(0),p.initialConfig={graphicLight:c,diffusedLight:s,offset:l},p.config=p.initialConfig,p.isOn=!1,y&&p.turnOn(),p.room.lightSources.add(p),p.effects=new i.default(p),p}var n,a,u;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(e,o.default),n=e,(a=[{key:"turnOn",value:function(){this.isOn||(null!==this.initialConfig.diffusedLight&&(this.diffusedLight=this.room.lights.addLight(this.x+this.initialConfig.offset.x,this.y+this.initialConfig.offset.y,this.initialConfig.diffusedLight.radius).setIntensity(this.initialConfig.diffusedLight.intensity),this.room.lightSources.diffusedLights.push(this.diffusedLight)),null!==this.initialConfig.graphicLight&&(this.graphicLight=this.room.lights.addLight(this.x+this.initialConfig.offset.x,this.y+this.initialConfig.offset.y,this.initialConfig.graphicLight.radius).setIntensity(this.initialConfig.graphicLight.intensity),this.room.lightSources.graphicLights.push(this.graphicLight)),this.isOn=!0)}},{key:"turnOff",value:function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.isOn){var t=this.room.lightSources.diffusedLights.indexOf(this.diffusedLight);t>-1&&(this.room.lightSources.diffusedLights.splice(t,1),this.room.lights.removeLight(this.diffusedLight));var e=this.room.lightSources.graphicLights.indexOf(this.graphicLight);e>-1&&(this.room.lightSources.graphicLights.splice(e,1),this.room.lights.removeLight(this.graphicLight)),this.isOn=!1}}},{key:"switch",value:function(){this.isOn?this.turnOff():this.turnOn()}}])&&c(n.prototype,a),u&&c(n,u),e}();e.default=l,t.exports=e.default},function(t,e,n){var o={getScreenProps:n(51)};t.exports=o},function(t,e,n){
/**
 * @author       Francesco Negri <francesco.negri@outlook.com>
 * @copyright    2019 The Darkest Light
 * @license      {@link https://github.com/FrancescoNegri/TheDarkestLib/blob/master/LICENSE|MIT License}
 */
var o={LayerManager:n(52),LightSourceManager:n(54),Manager:n(11),UpdateManager:n(55)};t.exports=o},function(t,e,n){var o={CursorSystem:n(56),RoomSystem:n(57)};t.exports=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=u(n(10)),r=u(n(2)),i=u(n(15)),a=u(n(4));function u(t){return t&&t.__esModule?t:{default:t}}function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function s(t,e){return!e||"object"!==c(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t,e,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var h=function(t){function e(t,n,o,u,c){var f,l;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(l=s(this,(f=e.__proto__||Object.getPrototypeOf(e)).call.apply(f,[this].concat(Array.prototype.slice.call(arguments),[!0,r.default.INTERACTIVE,{alphaTolerance:1}])))).actions=new i.default.ActionComponent(l),l.facing=a.default.RIGHT,l}var n,u,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}(e,o.default),n=e,(u=[{key:"create",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"create",this).call(this)}}])&&f(n.prototype,u),c&&f(n,c),e}();e.default=h,t.exports=e.default},function(t,e,n){"use strict";(function(e){var o=i(n(4)),r=i(n(28));function i(t){return t&&t.__esModule?t:{default:t}}
/**
 * @author       Francesco Negri <francesco.negri@outlook.com>
 * @copyright    2019 The Darkest Light
 * @license      {@link https://github.com/FrancescoNegri/TheDarkestLib/blob/master/LICENSE|MIT License}
 */var a={Components:n(15),Game:n(49),Managers:n(23),Rooms:n(58),Settings:n(3),Sprites:n(61),Systems:n(24),Utils:n(22)};a=r.default.Utils.Objects.Extend(!1,a,o.default),t.exports=a,e.TDLib=a}).call(this,n(27))},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e){t.exports=__WEBPACK_EXTERNAL_MODULE__28__},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n(5)),r=i(n(6));function i(t){return t&&t.__esModule?t:{default:t}}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function c(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var s=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=c(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))).gameObject=t,n.defaultAction=new r.default.Idle(n,n.gameObject),n._queue=[n.defaultAction],n._queue[0]._start(),n}var n,i,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(e,o.default),n=e,a=[{key:"DEFAULT_MODE",get:function(){return 0}},{key:"QUEUE_MODE",get:function(){return 1}},{key:"PAUSE_MODE",get:function(){return 2}}],(i=[{key:"add",value:function(t,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.DEFAULT_MODE,r=new t(this,this.gameObject,n);switch(o){case e.DEFAULT_MODE:this._queue[0]._abort(),this._queue=[],this._queue.push(r),this._queue[0]._start();break;case e.QUEUE_MODE:this._queue.push(r);break;case e.PAUSE_MODE:this._queue[0]._pause(),this._queue.unshift(r),this._queue[0]._start()}return r}},{key:"_remove",value:function(){this._queue.shift(),this._queue.length<=0&&this._queue.push(this.defaultAction),this._queue[0].isPaused?this._queue[0]._resume():this._queue[0]._start()}},{key:"_update",value:function(){this._queue.length<=0?this._queue.push(this.defaultAction):this._queue.length>1&&"Idle"===this._queue[0].name&&(this._queue.shift(),this._queue[0].isPaused?this._queue[0]._resume():this._queue[0]._start()),this._queue[0]._update()}}])&&u(n.prototype,i),a&&u(n,a),e}();e.default=s,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n(0)),r=i(n(12));function i(t){return t&&t.__esModule?t:{default:t}}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var f=function(t){function e(t,n,o){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=u(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))).addActions([new r.default(i,i.actor,i.config),i.target.behaviours.examine.getAction(i)]),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(e,o.default),e}();e.default=f,t.exports=e.default},function(t,e){t.exports={MICRO_MOVEMENT_RADIUS:6}},function(t,e){t.exports={WALK_VELOCITY:100,MICRO_MOVEMENT_RADIUS:20}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n(0)),r=i(n(4));function i(t){return t&&t.__esModule?t:{default:t}}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var f=function(t){function e(t,n,i){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(a=u(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))).addActions(new o.default.BaseAction(a,function(){switch(a.actor.body.setVelocity(0),a.actor.facing){case r.default.LEFT:case r.default.RIGHT:a.actor.anims.play("idle")}})),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(e,o.default),e}();e.default=f,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n(0)),r=i(n(12));function i(t){return t&&t.__esModule?t:{default:t}}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var f=function(t){function e(t,n,o){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=u(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))).addActions([new r.default(i,i.actor,i.config),i.target.behaviours.interact.getAction(i)]),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(e,o.default),e}();e.default=f,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n(0)),r=i(n(7));function i(t){return t&&t.__esModule?t:{default:t}}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var f=function(t){function e(t,n,o){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=u(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))).addActions([new r.default(i,i.actor,i.config),i.target.behaviours.observe.getAction(i)]),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(e,o.default),e}();e.default=f,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=a(n(0)),r=a(n(7)),i=a(n(37));function a(t){return t&&t.__esModule?t:{default:t}}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var s=function(t){function e(t,n,a){var u;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(u=c(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))).addActions([new r.default(u,u.actor,u.config),new o.default.BaseAction(u,function(){Math.abs(u.actor.x-u.target.x)>i.default.MICRO_MOVEMENT_RADIUS?(u.actor.x<u.target.x?(u.actor.anims.play("run"),u.actor.body.setVelocity(i.default.RUN_VELOCITY)):u.actor.x>u.target.x&&(u.actor.anims.play("run"),u.actor.body.setVelocity(-i.default.RUN_VELOCITY)),console.log("start to run to ",a.target.x)):u.finish()},function(){u.actor.body.setVelocity(0)},function(){(u.actor.x-u.target.x)*u.actor.body.velocity.x>0&&u.finish()})]),u}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(e,o.default),e}();e.default=s,t.exports=e.default},function(t,e){t.exports={RUN_VELOCITY:240,MICRO_MOVEMENT_RADIUS:20}},function(t,e){t.exports={EXAMINABLE:"EXAMINABLE",INERT:"INERT",INTERACTIVE:"INTERACTIVE",TALKABLE:"TALKABLE",INVENTORY:"INVENTORY",DEFAULT_MIN_LIGHT_LEVEL_TO_OBSERVE:.05,DEFAULT_OBSERVE_TEXT:"Observe default text",DEFAULT_NO_LIGHT_OBSERVE_TEXT:"NoLightObserve default text",DEFAULT_MIN_LIGHT_LEVEL_TO_EXAMINE_OR_INTERACT:.04,DEFAULT_EXAMINE_OR_INTERACT_TEXT:"ExamineOrInteract default text",DEFAULT_NO_LIGHT_EXAMINE_OR_INTERACT_TEXT:"NoLightExamineOrInteract default text"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n(8)),r=i(n(0));function i(t){return t&&t.__esModule?t:{default:t}}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function c(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var s=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),c(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}var n,i,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(e,o.default),n=e,(i=[{key:"getAction",value:function(t){var e=this;return new r.default.BaseAction(t,function(){e.checkLight(e.gameObject.minLightLevelToExamineOrInteract)?console.log(e.gameObject.examineOrInteractText):console.log(e.gameObject.noLightExamineOrInteractText),t.finish()})}}])&&u(n.prototype,i),a&&u(n,a),e}();e.default=s,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n(8)),r=i(n(0));function i(t){return t&&t.__esModule?t:{default:t}}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function c(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var s=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),c(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}var n,i,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(e,o.default),n=e,(i=[{key:"getAction",value:function(t){var e=this;return new r.default.BaseAction(t,function(){e.checkLight(e.gameObject.minLightLevelToExamineOrInteract)?console.log(e.gameObject.examineOrInteractText):console.log(e.gameObject.noLightExamineOrInteractText),t.finish()})}}])&&u(n.prototype,i),a&&u(n,a),e}();e.default=s,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=a(n(8)),r=a(n(6)),i=a(n(42));function a(t){return t&&t.__esModule?t:{default:t}}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function f(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t,e,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var y=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=f(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)))._timer,n}var n,a,u;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(e,o.default),n=e,(a=[{key:"add",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"add",this).call(this),this.gameObject.on("pointerover",function(t){var e=this;this.cursors.setCursor(this.gameObject),this._timer=this.gameObject.room.time.addEvent({delay:i.default.DEFAULT_MIN_TIME_TO_OBSERVE,callback:function(){e.gameObject===e.room.player||e.room.player.isBlocked||e.room.player.actions.add(r.default.Observe,{target:e.gameObject})},callbackScope:this})}.bind(this)),this.gameObject.on("pointerout",function(t){this._timer.remove(!1),this.cursors.setCursor()}.bind(this))}},{key:"abort",value:function(){this._timer.remove(!1)}},{key:"getAction",value:function(t){var e=this;return new r.default.Action.BaseAction(t,function(){e.checkLight(e.gameObject.minLightLevelToObserve)?console.log(e.gameObject.observeText):console.log(e.gameObject.noLightObserveText),t.finish()})}}])&&c(n.prototype,a),u&&c(n,u),e}();e.default=y,t.exports=e.default},function(t,e){t.exports={DEFAULT_MIN_TIME_TO_OBSERVE:1200}},function(t,e){},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},t.exports=e.default},function(t,e,n){var o={HardFlickering:n(19),HardFlickeringAndTrembling:n(46),LightEffect:n(1),RadiusFlickering:n(47),SoftFlickering:n(20),SoftFlickeringAndTrembling:n(48),Trembling:n(14)};t.exports=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=a(n(1)),r=a(n(19)),i=a(n(14));function a(t){return t&&t.__esModule?t:{default:t}}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function f(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t,e,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var y=function(t){function e(t,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=f(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,.5))).hardFlickering=new r.default(o.invoker,o.config),o.trembling=new i.default(o.invoker,o.config),o}var n,a,u;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(e,o.default),n=e,(a=[{key:"play",value:function(){var t=this;s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"play",this).call(this,function(){t.hardFlickering.play(),t.trembling.play()})}},{key:"stop",value:function(){var t=this;s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"stop",this).call(this,function(){t.hardFlickering.stop(),t.trembling.stop()})}}])&&c(n.prototype,a),u&&c(n,u),e}();e.default=y,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o,r=(o=n(1))&&o.__esModule?o:{default:o};function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function u(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t,e,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var l=function(t){function e(t,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=u(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,.9))).config.minTime||(o.config.minTime=10),o.config.maxTime||(o.config.maxTime=100),o.config.minPercentageIntensity||(o.config.minPercentageIntensity=.8),o.config.maxPercentageIntensity||(o.config.maxPercentageIntensity=1),o.config.minPercentageRadius||(o.config.minPercentageRadius=.8),o.config.maxPercentageRadius||(o.config.maxPercentageRadius=1),o.config.backToInitialIntensity||(o.config.backToInitialIntensity=!0),o.config.backToInitialRadius||(o.config.backToInitialRadius=!0),o}var n,o,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(e,r.default),n=e,(o=[{key:"play",value:function(){var t=this;c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"play",this).call(this,function(){!function e(){t.gameObject.room.time.addEvent({delay:Math.floor(Math.random()*(t.config.maxTime-t.config.minTime))+t.config.minTime,callback:function(){if(!t.stopped){var n=Math.floor(100*(t.config.minPercentageIntensity+Math.random()*(t.config.maxPercentageIntensity-t.config.minPercentageIntensity))+1)/100;t.gameObject.graphicLight.setIntensity(t.gameObject.config.graphicLight.intensity*n),t.gameObject.diffusedLight.setIntensity(t.gameObject.config.diffusedLight.intensity*n);var o=Math.floor(100*(t.config.minPercentageRadius+Math.random()*(t.config.maxPercentageRadius-t.config.minPercentageRadius))+1)/100;t.gameObject.graphicLight.setRadius(t.gameObject.config.graphicLight.radius*o),e()}},callbackScope:t,repeat:0})}()})}},{key:"stop",value:function(){var t=this;c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"stop",this).call(this,function(){t.config.backToInitialIntensity?(t.gameObject.graphicLight.setIntensity(t.gameObject.config.graphicLight.intensity),t.gameObject.diffusedLight.setIntensity(t.gameObject.config.diffusedLight.intensity)):(t.gameObject.config.graphicLight.intensity=t.gameObject.graphicLight.intensity,t.gameObject.config.diffusedLight.intensity=t.gameObject.diffusedLight.intensity),t.config.backToInitialRadius?t.gameObject.graphicLight.setRadius(t.gameObject.config.graphicLight.radius):t.gameObject.config.graphicLight.radius=t.gameObject.graphicLight.radius})}}])&&a(n.prototype,o),i&&a(n,i),e}();e.default=l,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=a(n(1)),r=a(n(20)),i=a(n(14));function a(t){return t&&t.__esModule?t:{default:t}}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function f(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t,e,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var y=function(t){function e(t,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=f(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,.5))).softFlickering=new r.default(o.invoker,o.config),o.trembling=new i.default(o.invoker,o.config),o}var n,a,u;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(e,o.default),n=e,(a=[{key:"play",value:function(){var t=this;s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"play",this).call(this,function(){t.softFlickering.play(),t.trembling.play()})}},{key:"stop",value:function(){var t=this;s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"stop",this).call(this,function(){t.softFlickering.stop(),t.trembling.stop()})}}])&&c(n.prototype,a),u&&c(n,u),e}();e.default=y,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=c(n(3)),r=c(n(50)),i=c(n(22)),a=c(n(23)),u=c(n(24));function c(t){return t&&t.__esModule?t:{default:t}}function f(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var s=function(){function t(e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.config=e,this._setScreenConfig(),this._setPhysicsConfig(),this._setPlugins(),this._setBoot(),this._setHeaderProps(),this._finalizeConfig(),o.default.GAME=new Phaser.Game(this.config),(0,r.default)(o.default.GAME),o.default.GAME}var e,n,c;return e=t,(n=[{key:"_setScreenConfig",value:function(){o.default.SCREEN_PROPS=i.default.getScreenProps(),this.config.width=o.default.SCREEN_PROPS.calculatedWidth,this.config.height=o.default.SCREEN_PROPS.calculatedHeight,this.config.zoom=o.default.SCREEN_PROPS.calculatedZoom,this.config.autoResize=!1,this.config.backgroundColor="#000000",this.config.pixelArt=!0}},{key:"_setPhysicsConfig",value:function(){this.config.physics={default:"arcade",arcade:{debug:!1,gravity:{y:0,x:0}}}}},{key:"_setPlugins",value:function(){this.config.plugins={global:[{key:"RoomSystem",plugin:u.default.RoomSystem,start:!1,mapping:"rooms"},{key:"CursorSystem",plugin:u.default.CursorSystem,start:!1,mapping:"cursors"}],scene:[{key:"UpdateManager",plugin:a.default.UpdateManager,mapping:"updates"},{key:"LightSourceManager",plugin:a.default.LightSourceManager,mapping:"lightSources"},{key:"LayerManager",plugin:a.default.LayerManager,mapping:"layers"}]}}},{key:"_setBoot",value:function(){this.config.scene=[Boot]}},{key:"_setHeaderProps",value:function(){this.config.banner=!1}},{key:"_finalizeConfig",value:function(){this.config.type=Phaser.WEBGL,this.config.maxLights=20,this.config.parent="game",this.config.disableContextMenu=!0}}])&&f(e.prototype,n),c&&f(e,c),t}();e.default=s,t.exports=e.default},function(t,e,n){
/**
 * @author       Francesco Negri <francesco.negri@outlook.com>
 * @copyright    2019 The Darkest Light
 * @license      {@link https://github.com/FrancescoNegri/TheDarkestLib/blob/master/LICENSE|MIT License}
 */
var o=n(4),r=n(3);t.exports=function(t){var e=t.config;e.bannerBackgroundColor="#0002e6",e.bannerTextColor="#ffffff",e.hidePhaser=!1;var n="WebGL";2!==e.renderType&&(n="NULL");var i,a=e.audio,u=t.device.audio;if(i=!u.webAudio||a&&a.disableWebAudio?a&&a.noAudio||!u.webAudio&&!u.audioData?"No Audio":"HTML5 Audio":"Web Audio",!t.device.browser.ie){var c,f="",s=[f];Array.isArray(e.bannerBackgroundColor)?(e.bannerBackgroundColor.forEach(function(t){f=f.concat("%c "),s.push("background: "+t),c=t}),s[s.length-1]="color: "+e.bannerTextColor+"; background: "+c):(f=f.concat("%c "),s.push("color: "+e.bannerTextColor+"; background: "+e.bannerBackgroundColor)),s.push("background: #fff"),e.gameTitle&&(f=f.concat(e.gameTitle),e.gameVersion&&(f=f.concat(" v"+e.gameVersion)),e.hidePhaser||(f=f.concat(" / "))),e.hidePhaser||(f=(f=f.concat("TDLib v"+o.VERSION+" / Phaser v"+o.PHASER_VERSION)).concat(" ("+n+" | "+i+" | "+r.DEVICE+")")),f=f.concat(" %c "+e.gameURL),s[0]=f,console.log.apply(console,s)}}},function(t,e,n){"use strict";var o,r=(o=n(3))&&o.__esModule?o:{default:o};t.exports=function(){var t={};return"MOBILE"===r.default.DEVICE?(t.availHeight=window.innerHeight,t.availWidth=window.innerWidth,t.calculatedZoom=Math.floor(t.availHeight/((r.default.ROOM_HEIGHT_IN_TILE+r.default.INVENTORY_HEIGHT_IN_TILES_MOBILE+2*r.default.ROOM_FRAME_IN_TILES_MOBILE)*r.default.TILE_SIZE)*100)/100):(t.availHeight=screen.height,t.availWidth=screen.width,t.calculatedZoom=Math.floor(t.availHeight/((r.default.ROOM_HEIGHT_IN_TILE+r.default.INVENTORY_HEIGHT_IN_TILES_DESKTOP+2*r.default.ROOM_FRAME_IN_TILES_DESKTOP)*r.default.TILE_SIZE)*100)/100),console.log("ZOOM: "+t.calculatedZoom),t.calculatedHeight=Math.ceil(t.availHeight/t.calculatedZoom),t.calculatedWidth=Math.ceil(t.availWidth/t.calculatedZoom),console.log("AVAIL-H: "+t.availHeight+"\nCALC-H: "+t.calculatedHeight),console.log("AVAIL-W: "+t.availWidth+"\nCALC-W: "+t.calculatedWidth),t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n(11)),r=i(n(53));function i(t){return t&&t.__esModule?t:{default:t}}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function c(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function f(t,e,n){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=s(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var p=function(t){function e(t,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=c(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))).layerSize=r.default.layerSize,o.strartingDepth=r.default.startingDepth,o}var n,i,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(e,o.default),n=e,(i=[{key:"boot",value:function(){f(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"boot",this).call(this),this.backgroundLayer=this.room.add.group(),this.rearDoorsLayer=this.room.add.group(),this.wallFurnitureLayer=this.room.add.group(),this.roomFurnitureLayer=this.room.add.group(),this.sideDoorsLayer=this.room.add.group(),this.npcLayer=this.room.add.group(),this.playerLayer=this.room.add.group(),this.cielingObjectsLayer=this.room.add.group(),this.frontDoorsLayer=this.room.add.group(),this.wallsLayer=this.room.add.group(),this.wallsMaskLayer=this.room.add.group(),this.overallDarknessLayer=this.room.add.group(),this.borderMasksLayer=this.room.add.group()}},{key:"setLayersDepth",value:function(){var t=this.strartingDepth;this.backgroundLayer.setDepth(this.layerSize*t),t++,this.rearDoorsLayer.setDepth(this.layerSize*t),t++,this.wallFurnitureLayer.setDepth(this.layerSize*t),t++,this.roomFurnitureLayer.setDepth(this.layerSize*t),t++,this.sideDoorsLayer.setDepth(this.layerSize*t),t++,this.npcLayer.setDepth(this.layerSize*t),t++,this.playerLayer.setDepth(this.layerSize*t),t++,this.cielingObjectsLayer.setDepth(this.layerSize*t),t++,this.frontDoorsLayer.setDepth(this.layerSize*t),t++,this.wallsLayer.setDepth(this.layerSize*t),t++,this.wallsMaskLayer.setDepth(this.layerSize*t),t++,this.overallDarknessLayer.setDepth(this.layerSize*t),t++,this.borderMasksLayer.setDepth(this.layerSize*t),t++}}])&&u(n.prototype,i),a&&u(n,a),e}();e.default=p,t.exports=e.default},function(t,e){t.exports={layerSize:10,startingDepth:0}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n(11)),r=i(n(3));function i(t){return t&&t.__esModule?t:{default:t}}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function c(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function f(t,e,n){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=s(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var p=function(t){function e(t,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=c(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))).graphicLights=[],o.diffusedLights=[],o}var n,i,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(e,o.default),n=e,(i=[{key:"boot",value:function(){f(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"boot",this).call(this),this.lightSources=this.room.add.group()}},{key:"add",value:function(t){return this.lightSources.add(t,!0),this.lightSources.getChildren().forEach(function(t){t.setPipeline("Light2D")}),t}},{key:"calculateLightsContribuitePoint",value:function(t){var e=0;return this.lightSources.getChildren().forEach(function(n){if(n.isOn){var o=n.config.diffusedLight.intensity/(2^Math.abs(n.x+n.config.offset.x-t.x));n.effects.currentEffect&&(o*=n.effects.currentEffect.contributeFactor),e+=o}}),Math.floor(1e4*e)/1e3}},{key:"calculateAverageLightsContribute",value:function(){var t=0;this.diffusedLights.forEach(function(e){t+=e.intensity});var e=0;return 0!==t&&(e=Math.floor(1e4*t/this.room.layers.wallsLayer.width/r.default.TILE_SIZE*100)/100+.3),e}}])&&u(n.prototype,i),a&&u(n,a),e}();e.default=p,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o,r=(o=n(11))&&o.__esModule?o:{default:o};function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function u(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t,e,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var l=function(t){function e(t,n){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),u(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))}var n,o,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(e,r.default),n=e,(o=[{key:"boot",value:function(){c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"boot",this).call(this);var t=this.systems.events;this.gameObjects=new Phaser.Structs.Set,t.on("update",this._sceneUpdate,this),t.on("shutdown",this._sceneShutdown,this),t.once("destroy",this._sceneDestroy,this)}},{key:"_sceneUpdate",value:function(t,e){this.gameObjects.iterateLocal("update",t,e)}},{key:"_sceneShutdown",value:function(){this.gameObjects.clear()}},{key:"_sceneDestroy",value:function(){var t=this.systems.events;t.off("update",this._scenePostUpdate,this),t.off("shutdown",this._sceneShutdown,this),t.off("destroy",this._sceneDestroy,this),this.gameObjects=null,this.scene=null,this.systems=null}},{key:"add",value:function(t){t.once("destroy",this.remove,this),this.gameObjects.set(t)}},{key:"addMultiple",value:function(t){t.forEach(this.add,this)}},{key:"remove",value:function(t){t.off("destroy",this.remove,this),this.gameObjects.delete(t)}}])&&a(n.prototype,o),i&&a(n,i),e}();e.default=l,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n(6)),r=i(n(2));function i(t){return t&&t.__esModule?t:{default:t}}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function f(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),t}function s(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var y=function(t){function e(t){var n;return u(this,e),(n=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))).cursorScene,n.sceneManager,n.lastTarget,n}return l(e,Phaser.Plugins.BasePlugin),f(e,[{key:"configure",value:function(t){this.sceneManager=t,this.cursorScene=this.sceneManager.add(e.CURSOR_SCENE_KEY,e.CursorScene,!0)}},{key:"pointerDown",value:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t.isBlocked)switch(this.cursorScene.cursor.texture.key){case e.DEFAULT_CURSOR:void 0!==t.room.input.activePointer.camera&&t.actions.add(o.default.WalkTo,{target:{x:t.room.input.activePointer.worldX}});break;case e.EXAMINABLE_CURSOR:this.lastTarget.behaviours.observe.abort(),t.actions.add(o.default.Examine,{target:this.lastTarget});break;case e.INTERACTIVE_CURSOR:this.lastTarget.behaviours.observe.abort(),t.actions.add(o.default.Interact,{target:this.lastTarget});break;case e.TALKABLE_CURSOR:t.actions.add(o.default.TalkTo,{target:this.lastTarget})}}},{key:"setCursor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{behaviours:{type:r.default.INERT},room:{}};if("room"in t&&t!==t.room.player){switch(t.behaviours.type){case r.default.INERT:this.cursorScene.cursor.setTexture(e.DEFAULT_CURSOR).setOrigin(.4,.33);break;case r.default.EXAMINABLE:this.cursorScene.cursor.setTexture(e.EXAMINABLE_CURSOR).setOrigin(.33,.29);break;case r.default.INTERACTIVE:this.cursorScene.cursor.setTexture(e.INTERACTIVE_CURSOR).setOrigin(.4,.33);break;case r.default.TALKABLE:this.cursorScene.cursor.setTexture(e.TALKABLE_CURSOR)}this.lastTarget=t}}},{key:"showCursor",value:function(){this.cursorScene.cursor.setVisible(!0)}},{key:"hideCursor",value:function(){this.cursorScene.cursor.setVisible(!1)}}],[{key:"CursorScene",get:function(){return function(t){function n(){var t;return u(this,n),(t=s(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e.CURSOR_SCENE_KEY))).cursor,t}return l(n,Phaser.Scene),f(n,[{key:"preload",value:function(){this.load.image(e.EXAMINABLE_CURSOR,"assets/Cursors/CursorExamine.png"),this.load.image(e.HOLD_CURSOR,"assets/Cursors/CursorHold.png"),this.load.image(e.INTERACTIVE_CURSOR,"assets/Cursors/CursorInteract.png"),this.load.image(e.DEFAULT_CURSOR,"assets/Cursors/CursorMove.png"),this.load.image(e.TALKABLE_CURSOR,"assets/Cursors/CursorTalk.png"),this.load.image(e.CHOICE_CURSOR,"assets/Cursors/CursorChoice.png"),this.load.image(e.CHOICE_PRESSED_CURSOR,"assets/Cursors/CursorChoicePressed.png")}},{key:"create",value:function(){this.input.setDefaultCursor("none"),this.cursor=this.add.image(0,0,e.DEFAULT_CURSOR).setOrigin(.4,.33).setDepth(1e5)}},{key:"update",value:function(){this.cursor.setPosition(this.input.activePointer.x,this.input.activePointer.y)}}]),n}()}},{key:"CURSOR_SCENE_KEY",get:function(){return"CursorScene"}},{key:"DEFAULT_CURSOR",get:function(){return"cursorMove"}},{key:"EXAMINABLE_CURSOR",get:function(){return"cursorExamine"}},{key:"INTERACTIVE_CURSOR",get:function(){return"cursorInteract"}},{key:"HOLD_CURSOR",get:function(){return"cursorHold"}},{key:"TALKABLE_CURSOR",get:function(){return"cursorTalk"}},{key:"CHOICE_CURSOR",get:function(){return"cursorChoice"}},{key:"CHOICE_PRESSED_CURSOR",get:function(){return"cursorChoicePressed"}}]),e}();e.default=y,t.exports=e.default},function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function i(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))).sceneManager={},n}var n,o,u;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(e,Phaser.Plugins.BasePlugin),n=e,(o=[{key:"add",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];console.log("Added room:",t.name),this.sceneManager.add(t.name,t,e)}},{key:"configure",value:function(t){this.sceneManager=t}}])&&r(n.prototype,o),u&&r(n,u),e}();e.default=u,t.exports=e.default},function(t,e,n){var o={Room:n(59)};t.exports=o},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _Settings=_interopRequireDefault(__webpack_require__(3)),_Utils=_interopRequireDefault(__webpack_require__(60));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}function _possibleConstructorReturn(t,e){return!e||"object"!==_typeof(e)&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Room=function(_Phaser$Scene){function Room(t,e){var n;return _classCallCheck(this,Room),(n=_possibleConstructorReturn(this,(Room.__proto__||Object.getPrototypeOf(Room)).call(this,t))).assets={raw:e,array:[]},n.averageLightsContribute,n.cursors,n.layers,n.map,n.name=n.constructor.name,n.player,n.rooms,n}return _inherits(Room,_Phaser$Scene),_createClass(Room,[{key:"preload",value:function(){var t=this;this._scrapeAssets(),this.assets.array.forEach(function(e){"nPath"in e?t.load[e.type](e.key,[e.path,e.nPath]):"bPath"in e?(t.load[e.type](e.key,e.path),t.load[e.type](e.key+"_b",e.bPath)):t.load[e.type](e.key,e.path)}),this.load.image("top-border-mask-camera","assets/Masks/topMaskCamera.png"),this.load.image("bottom-border-mask-camera","assets/Masks/bottomMaskCamera.png"),this.load.image("left-border-mask-camera","assets/Masks/leftMaskCamera.png"),this.load.image("right-border-mask-camera","assets/Masks/rightMaskCamera.png")}},{key:"_scrapeAssets",value:function(){var t=this;for(var e in this.assets.raw)_Utils.default.scrapeComplexObjKey(this.assets.raw[e],{type:e},"path",function(e,n){e.type=n.type,e.key=_Utils.default.findFileNameFromPath(e.path),t.assets.array.push(e)})}},{key:"create",value:function(t){this.player=t.setName("player"),this.lights.enable(),this.scene.bringToTop("CursorScene"),this._setCameraViewport(),this._createRoom(),this._createSprites(),this._applyBorderMasks(),this.layers.setLayersDepth(),this.cameras.main.setBounds(0,0,this.layers.wallsLayer.width,this.layers.wallsLayer.height),this.cameras.main.startFollow(this.player),this.cameras.main.setRoundPixels(!0),this.physics.world.setBounds(_Settings.default.TILE_SIZE,_Settings.default.TILE_SIZE,this.layers.wallsLayer.width-2*_Settings.default.TILE_SIZE,this.layers.wallsLayer.height-2*_Settings.default.TILE_SIZE)}},{key:"_setCameraViewport",value:function(){"MOBILE"===_Settings.default.DEVICE?(this.cameras.main.setPosition((_Settings.default.ROOM_FRAME_IN_TILES_MOBILE+_Settings.default.INVENTORY_WIDTH_IN_TILES_MOBILE)*_Settings.default.TILE_SIZE,(_Settings.default.ROOM_FRAME_IN_TILES_MOBILE+_Settings.default.INVENTORY_HEIGHT_IN_TILES_MOBILE)*_Settings.default.TILE_SIZE),this.cameras.main.setSize(_Settings.default.SCREEN_PROPS.calculatedWidth-2*(_Settings.default.ROOM_FRAME_IN_TILES_MOBILE+_Settings.default.INVENTORY_WIDTH_IN_TILES_MOBILE)*_Settings.default.TILE_SIZE,_Settings.default.ROOM_HEIGHT_IN_TILE*_Settings.default.TILE_SIZE)):(this.cameras.main.setPosition(_Settings.default.ROOM_FRAME_IN_TILES_DESKTOP*_Settings.default.TILE_SIZE,_Settings.default.ROOM_FRAME_IN_TILES_DESKTOP*_Settings.default.TILE_SIZE),this.cameras.main.setSize(_Settings.default.SCREEN_PROPS.calculatedWidth-2*_Settings.default.ROOM_FRAME_IN_TILES_DESKTOP*_Settings.default.TILE_SIZE,_Settings.default.ROOM_HEIGHT_IN_TILE*_Settings.default.TILE_SIZE))}},{key:"_createRoom",value:function(){this.map=this.make.tilemap({key:_Utils.default.findFileNameFromPath(this.assets.raw.tilemapTiledJSON.path),tileWidth:_Settings.default.TILE_SIZE,tileHeight:_Settings.default.TILE_SIZE}),this.layers.backgroundLayer=this.map.createDynamicLayer("backgroundLayer",this.map.addTilesetImage(_Utils.default.findFileNameFromPath(this.assets.raw.image.tiles.background.path)),0,0),this.layers.wallsLayer=this.map.createDynamicLayer("wallsLayer",this.map.addTilesetImage(_Utils.default.findFileNameFromPath(this.assets.raw.image.tiles.walls.path)),0,0),this.layers.wallsMaskLayer=this.map.createDynamicLayer("wallsMaskLayer",this.map.addTilesetImage(_Utils.default.findFileNameFromPath(this.assets.raw.image.tiles.walls.bPath)),0,0)}},{key:"_createSprites",value:function _createSprites(){var _this5=this,_this=this;this.map.objects.forEach(function(layer){layer.objects.forEach(function(element){_this5[element.name]=eval("new "+element.type+"(_this,"+(element.x+element.width/2)+", "+(element.y-element.height/2)+");"),_this5[element.name].setName(element.name)})})}},{key:"_applyBorderMasks",value:function(){this.layers.borderMasksLayer.create(0,0,"top-border-mask-camera").setScrollFactor(0).setOrigin(0,0),this.layers.borderMasksLayer.create(0,0,"left-border-mask-camera").setScrollFactor(0).setOrigin(0,0),this.layers.borderMasksLayer.create(this.cameras.main.width-_Settings.default.TILE_SIZE,0,"right-border-mask-camera").setScrollFactor(0).setOrigin(0,0),this.layers.borderMasksLayer.create(0,this.cameras.main.height-_Settings.default.TILE_SIZE,"bottom-border-mask-camera").setScrollFactor(0).setOrigin(0,0)}},{key:"update",value:function(){this._updateMasksByLightDiffusion(),this.children.list.forEach(function(t){"actions"in t&&t.actions._update()})}},{key:"_updateMasksByLightDiffusion",value:function(){this.averageLightsContribute=this.lightSources.calculateAverageLightsContribute(),this.layers.wallsMaskLayer.setAlpha(1-this.averageLightsContribute)}}]),Room}(Phaser.Scene);exports.default=Room,module.exports=exports.default},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o={scrapeComplexObjKey:function(t,e,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)o.scrapeComplexObjKey(t[a],e,r,i);else if(null!==t&&"object"===n(t))if(r in t)i(t,e);else for(var u in t)o.scrapeComplexObjKey(t[u],e,r,i)},findFileNameFromPath:function(t){var e=t.lastIndexOf("/")+1,n=t.lastIndexOf(".");return-1===e&&(e=0),-1===n?-1:t.slice(e,n)}};t.exports=o},function(t,e,n){var o={Actions:n(6),Behaviours:n(2),Characters:n(62),Effects:n(17),InventoryItems:n(65),WorldItems:n(67),Sprite:n(10)};t.exports=o},function(t,e,n){var o={NPCharacter:n(63),Player:n(64)};t.exports=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o,r=(o=n(25))&&o.__esModule?o:{default:o};function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var c=function(t){function e(t,n,o,r,i){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,o,r,i))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(e,r.default),e}();e.default=c,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o,r=(o=n(25))&&o.__esModule?o:{default:o};function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function u(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t,e,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var l=function(t){function e(t,n,o,r){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=u(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,o,r,"playerLayer"))).isBlocked=!1,i}var n,o,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(e,r.default),n=e,(o=[{key:"create",value:function(){c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"create",this).call(this),this.room.input.on("pointerdown",function(t){this.room.cursors.pointerDown(this)},this)}}])&&a(n.prototype,o),i&&a(n,i),e}();e.default=l,t.exports=e.default},function(t,e,n){var o={InventoryItem:n(66)};t.exports=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o,r=(o=n(10))&&o.__esModule?o:{default:o};function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function u(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t,e,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var l=function(t){function e(t,n,o,r,i){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),u(this,(a=e.__proto__||Object.getPrototypeOf(e)).call.apply(a,[this].concat(Array.prototype.slice.call(arguments),[!1])))}var n,o,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(e,r.default),n=e,(o=[{key:"create",value:function(){c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"create",this).call(this)}}])&&a(n.prototype,o),i&&a(n,i),e}();e.default=l,t.exports=e.default},function(t,e,n){var o={WorldItem:n(9),LightSources:n(68),RoomFurnitures:n(69),WallFurnitures:n(71)};t.exports=o},function(t,e,n){var o={LightSource:n(21)};t.exports=o},function(t,e,n){var o={RoomFurniture:n(70)};t.exports=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o,r=(o=n(9))&&o.__esModule?o:{default:o};function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var c=function(t){function e(t,n,o,r,i,u,c,f,s,l,p,y,h,d,b){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,o,r,"roomFurnitureLayer",!0,i,u,c,f,s,l,p,y,h,d,b))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(e,r.default),e}();e.default=c,t.exports=e.default},function(t,e,n){var o={WallFurniture:n(72)};t.exports=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o,r=(o=n(9))&&o.__esModule?o:{default:o};function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var c=function(t){function e(t,n,o,r,i,u,c,f,s,l,p,y,h,d,b){var g;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(g=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,o,r,"wallFurnitureLayer",!0,i,u,c,f,s,l,p,y,h,d,b))).setGravityY(0),g}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(e,r.default),e}();e.default=c,t.exports=e.default}])});
//# sourceMappingURL=the-darkest-lib.min.js.map